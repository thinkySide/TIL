# Copy on Write (CoW)

## Define
- 값 변경이 발생하기 전까지 같은 메모리 주소값을 가리키다가, 값 변경 시 복사를 수행하는 방식을 뜻함.
- 15글자가 넘는 문자열(String), 컬렉션(Arraym Set, Dictionary)이 CoW 복사 방식을 사용한다.

## Swift에서의 CoW
문자열, 컬렉션 타입은 struct(구조체)로 만들어져 있기 때문에 항상 값 복사가 일어날 것 같지만, 이는 비효율적임으로 메모리 오버헤드를 발생시킬 수 있다. 그래서 처음에는 같은 메모리 주소를 공유하다가, 실제 값 변경이 일어났을 때 그제서야 값 복사를 실행하는 방식으로 동작한다. swift의 메모리를 효율적으로 사용하기 위한 방법이다.
~~~swift
var aArray = [1, 2, 3]
var bArray = aArray // aArray와 같은 메모리 주소 담음.

bArray.append(4) // 값 변경이 일어나 이제서야 값 복사 실행.
~~~