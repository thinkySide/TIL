# Memory Structure 메모리 구조

## Code
### 특징
- compile된 컴퓨터 언어

## | Data
### 특징
- 전역 변수 등이 이에 해당.
- Data 영역에 생성된 인스턴스는 APP 종료 직전까지 해제되지 않음.

## | Heap
### 특징
- class의 인스턴스가 heap에 저장.
- 전체 공간을 스캔 후, 빈 공간에 메모리 할당.
- ARC가 관리해주지만, 강한순환참조 등의 문제를 고려해 개발자가 관리해야함.

## | Stack
### 특징
- 기본적으로 strct의 인스턴스는 stack에 생성   
(정확히 말하자면 값타입은 선언하는 곳에 저장되는 것이 원칙)
- LIFO 구조로 쌓임. (빠르게 쌓이고, 빠르게 사라짐)
- 개발자가 따로 관리해줄 필요가 없음.

### stackframe의 크기
모든 Method(함수)는 stack에서 stackframe을 만들어 실행 되며,
stackframe은 컴파일 시점에 크기가 정해진다. 그 이후 stackframe은 크기가 고정되는데, 문자열이나 컬렉션 같은 경우 가변적으로 크기가 늘어날 수 있기 때문에 이 경우 유동적으로 처리 된다. Swift의 특징 중 하나로 처음에는 스택에 저장되었다가 약 15자 이상이 넘어가면 heap에 저장하는 방식으로 동작한다. 메모리 구조를 효율적으로 쓰기 위한 애플의 기술이다.   
※ 이러한 이유로 다른 언어에서는 문자열과 컬렉션을 클래스로 구현해 처음부터 heap에 저장한다고 한다.